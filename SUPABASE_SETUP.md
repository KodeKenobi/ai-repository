# Supabase Setup Guide

## 1. Create a Supabase Project

1. Go to [supabase.com](https://supabase.com)
2. Sign up or log in
3. Create a new project
4. Choose a region close to your users
5. Set a strong database password

## 2. Get Your Supabase Credentials

1. In your Supabase dashboard, go to Settings > API
2. Copy the following values:
   - Project URL (NEXT_PUBLIC_SUPABASE_URL)
   - Anon/Public Key (NEXT_PUBLIC_SUPABASE_ANON_KEY)
   - Service Role Key (SUPABASE_SERVICE_ROLE_KEY)

## 3. Set Up Environment Variables

Create a `.env.local` file in the root of your app directory with:

```env
# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# NextAuth Configuration
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret_key
```

## 4. Set Up the Database Schema

1. In your Supabase dashboard, go to SQL Editor
2. Copy the contents of `supabase-schema.sql`
3. Paste and run the SQL to create all tables and policies

## 5. Install Dependencies

```bash
npm install
```

## 6. Test the Setup

Start your development server:

```bash
npm run dev
```

The signup endpoint should now work without the 500 error!

## Database Schema

The schema includes:
- Users table with authentication
- Companies table for supplier/competitor data
- Content items for uploaded files and URLs
- Transcriptions for audio/video content
- Business insights generated by AI
- Consistency and gap analysis reports

All tables have Row Level Security (RLS) enabled to ensure users can only access their own data.
